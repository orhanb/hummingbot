from unittest import TestCase

from hummingbot.connector.exchange.btcturk.btcturk_order_book import BtcturkOrderBook
from hummingbot.core.data_type.order_book_message import OrderBookMessageType


class BtcturkOrderBookTests(TestCase):
    """[991, {'current': '5.1.0', 'min': '2.3.0', 'type': 991}]
[100, {'message': 'join|obdiff:BTCTRY', 'ok': True, 'type': 100}]
[431,
 {'AO': [{'A': '0.03193427172', 'P': '595000'},
         {'A': '0.00420446', 'P': '595200'},
         {'A': '0.03196689', 'P': '595350'},
         {'A': '0.00119853', 'P': '595369'},
         {'A': '0.00054978', 'P': '595374'}],
  'BO': [{'A': '0.000249498098', 'P': '594935'},
         {'A': '0.26639093', 'P': '594933'},
         {'A': '0.01620816', 'P': '594894'},
         {'A': '0.00298049', 'P': '594803'},
         {'A': '0.55466785', 'P': '594660'}],
  'CS': 6906955,
  'PS': 'BTCTRY',
  'channel': 'obdiff',
  'event': 'BTCTRY',
  'type': 431}]
[432,
 {'AO': [{'A': '0.15801698', 'CP': 0, 'P': '600499'}],
  'BO': [{'A': '0.19684722', 'CP': 1, 'P': '594529'},
         {'A': '0.1968578', 'CP': 3, 'P': '594491'}],
  'CS': 6906954,
  'PS': 'BTCTRY',
  'channel': 'obdiff',
  'event': 'BTCTRY',
  'type': 432}]
"""

    def test_snapshot_message_from_exchange(self):
        msg_431 = [431,
                   {'AO': [
                       {'A': '0.01394686', 'P': '591468'},
                       {'A': '0.54552192', 'P': '591469'},
                       {'A': '0.01182674', 'P': '592000'},
                       {'A': '0.17179163', 'P': '592005'},
                       {'A': '0.00845273', 'P': '592116'}],
                       'BO': [
                           {'A': '0.00289257', 'P': '590951'},
                           {'A': '0.2', 'P': '590948'},
                           {'A': '0.02674451', 'P': '590694'},
                           {'A': '0.02', 'P': '590569'},
                           {'A': '0.28886161', 'P': '590154'}],
                       'CS': 6905470,
                       'PS': 'BTCTRY',
                       'channel': 'orderbook',
                       'event': 'BTCTRY',
                       'type': 431}]
        snapshot_message = BtcturkOrderBook.snapshot_message_from_exchange(
            msg=msg_431[1],
            timestamp=1640000000.0,
            metadata={"trading_pair": "BTCTRY"}
        )

        self.assertEqual("BTCTRY", snapshot_message.trading_pair)
        self.assertEqual(OrderBookMessageType.SNAPSHOT, snapshot_message.type)
        self.assertEqual(6905470, snapshot_message.timestamp)  # TODO our timestamp
        self.assertEqual(6905470, snapshot_message.update_id)
        self.assertEqual(-1, snapshot_message.trade_id)
        self.assertEqual(5, len(snapshot_message.bids))
        self.assertEqual(590951, snapshot_message.bids[0].price)
        self.assertEqual(0.00289257, snapshot_message.bids[0].amount)
        self.assertEqual(6905470, snapshot_message.bids[0].update_id)
        self.assertEqual(5, len(snapshot_message.asks))
        self.assertEqual(591468, snapshot_message.asks[0].price)
        self.assertEqual(0.01394686, snapshot_message.asks[0].amount)
        self.assertEqual(6905470, snapshot_message.asks[0].update_id)

    # def test_diff_message_from_exchange(self):
    #     """[432,
    #     {'AO': [],
    #     'BO': [{'A': '0.038', 'CP': 1, 'P': '594936'},
    #             {'A': '0.01659254', 'CP': 0, 'P': '594894'},
    #             {'A': '0.06156835', 'CP': 3, 'P': '580666'}],
    #     'CS': 6906955,
    #     'PS': 'BTCTRY',
    #     'channel': 'obdiff',
    #     'event': 'BTCTRY',
    #     'type': 432}]"""
    #
    #     diff_msg = BtcturkOrderBook.diff_message_from_exchange(
    #         msg={
    #             "e": "depthUpdate",
    #             "E": 123456789,
    #             "s": "COINALPHAHBOT",
    #             "U": 1,
    #             "u": 2,
    #             "b": [
    #                 [
    #                     "0.0024",
    #                     "10"
    #                 ]
    #             ],
    #             "a": [
    #                 [
    #                     "0.0026",
    #                     "100"
    #                 ]
    #             ]
    #         },
    #         timestamp=1640000000.0,
    #         metadata={"trading_pair": "COINALPHA-HBOT"}
    #     )
    #
    #     self.assertEqual("COINALPHA-HBOT", diff_msg.trading_pair)
    #     self.assertEqual(OrderBookMessageType.DIFF, diff_msg.type)
    #     self.assertEqual(1640000000.0, diff_msg.timestamp)
    #     self.assertEqual(2, diff_msg.update_id)
    #     self.assertEqual(1, diff_msg.first_update_id)
    #     self.assertEqual(-1, diff_msg.trade_id)
    #     self.assertEqual(1, len(diff_msg.bids))
    #     self.assertEqual(0.0024, diff_msg.bids[0].price)
    #     self.assertEqual(10.0, diff_msg.bids[0].amount)
    #     self.assertEqual(2, diff_msg.bids[0].update_id)
    #     self.assertEqual(1, len(diff_msg.asks))
    #     self.assertEqual(0.0026, diff_msg.asks[0].price)
    #     self.assertEqual(100.0, diff_msg.asks[0].amount)
    #     self.assertEqual(2, diff_msg.asks[0].update_id)
    #
    # def test_trade_message_from_exchange(self):
    #     # 421 for recent trades
    #     # 422 for trades. API keeps sending 421, send 422 in case of trade
    #     '''[991, {'current': '5.1.0', 'min': '2.3.0', 'type': 991}]
    #     [100, {'message': 'join|trade:AVAXUSDT', 'ok': True, 'type': 100}]
    #     [421,
    #     {'channel': 'trade',
    #     'event': 'AVAXUSDT',
    #     'items': [{'A': '13.2630000000',
    #                 'D': '1647000805483',
    #                 'I': '110163781755762125',
    #                 'P': '76.5900000000',
    #                 'S': 0},
    #                 {'A': '3.7147661242',
    #                 'D': '1647000787783',
    #                 'I': '110163781755762124',
    #                 'P': '76.5900000000',
    #                 'S': 0},
    #                 {'A': '1.4220000000',
    #                 'D': '1647000779134',
    #                 'I': '110163781755762123',
    #                 'P': '76.5900000000',
    #                 'S': 0},
    #                 {'A': '0.3980000000',
    #                 'D': '1647000779134',
    #                 'I': '110163781755762122',
    #                 'P': '76.5800000000',
    #                 'S': 0},
    #                 {'A': '0.3980000000',
    #                 'D': '1647000752604',
    #                 'I': '110163781755762121',
    #                 'P': '76.5200000000',
    #                 'S': 1},
    #                 {'A': '4.3420000000',
    #                 'D': '1647000736635',
    #                 'I': '110163781755762120',
    #                 'P': '76.7000000000',
    #                 'S': 1},
    #                 {'A': '1.0230000000',
    #                 'D': '1647000722276',
    #                 'I': '110163781755762119',
    #                 'P': '76.7000000000',
    #                 'S': 1},
    #                 {'A': '29.2110000000',
    #                 'D': '1647000717267',
    #                 'I': '110163781755762118',
    #                 'P': '76.7800000000',
    #                 'S': 0},
    #                 {'A': '1.1120000000',
    #                 'D': '1647000717267',
    #                 'I': '110163781755762117',
    #                 'P': '76.7700000000',
    #                 'S': 0},
    #                 {'A': '0.6100000000',
    #                 'D': '1647000717267',
    #                 'I': '110163781755762116',
    #                 'P': '76.7700000000',
    #                 'S': 0},
    #                 {'A': '0.7900000000',
    #                 'D': '1647000698542',
    #                 'I': '110163781755762115',
    #                 'P': '76.7000000000',
    #                 'S': 0},
    #                 {'A': '1.1120000000',
    #                 'D': '1647000692670',
    #                 'I': '110163781755762114',
    #                 'P': '76.6900000000',
    #                 'S': 1},
    #                 {'A': '0.2880000000',
    #                 'D': '1647000692670',
    #                 'I': '110163781755762113',
    #                 'P': '76.6900000000',
    #                 'S': 1},
    #                 {'A': '1.4000000000',
    #                 'D': '1647000691575',
    #                 'I': '110163781755762112',
    #                 'P': '76.6900000000',
    #                 'S': 1},
    #                 {'A': '0.6100000000',
    #                 'D': '1647000687258',
    #                 'I': '110163781755762111',
    #                 'P': '76.7000000000',
    #                 'S': 1},
    #                 {'A': '1.5220000000',
    #                 'D': '1647000683927',
    #                 'I': '110163781755762110',
    #                 'P': '76.7900000000',
    #                 'S': 0},
    #                 {'A': '0.1479137526',
    #                 'D': '1647000676243',
    #                 'I': '110163781755762109',
    #                 'P': '76.8000000000',
    #                 'S': 0},
    #                 {'A': '6.8118144120',
    #                 'D': '1647000658838',
    #                 'I': '110163781755762108',
    #                 'P': '76.7900000000',
    #                 'S': 0},
    #                 {'A': '0.6758317902',
    #                 'D': '1647000652206',
    #                 'I': '110163781755762107',
    #                 'P': '76.8000000000',
    #                 'S': 0},
    #                 {'A': '1.9050000000',
    #                 'D': '1647000652206',
    #                 'I': '110163781755762106',
    #                 'P': '76.7600000000',
    #                 'S': 0},
    #                 {'A': '13.0294836890',
    #                 'D': '1647000635442',
    #                 'I': '110163781755762105',
    #                 'P': '76.6800000000',
    #                 'S': 0},
    #                 {'A': '4.0310000000',
    #                 'D': '1647000617276',
    #                 'I': '110163781755762104',
    #                 'P': '76.6900000000',
    #                 'S': 0},
    #                 {'A': '0.6490000000',
    #                 'D': '1647000617276',
    #                 'I': '110163781755762103',
    #                 'P': '76.6400000000',
    #                 'S': 0},
    #                 {'A': '0.2300000000',
    #                 'D': '1647000617276',
    #                 'I': '110163781755762102',
    #                 'P': '76.6100000000',
    #                 'S': 0},
    #                 {'A': '8.9211864350',
    #                 'D': '1647000607046',
    #                 'I': '110163781755762101',
    #                 'P': '76.6000000000',
    #                 'S': 1},
    #                 {'A': '4.7430000000',
    #                 'D': '1647000604304',
    #                 'I': '110163781755762100',
    #                 'P': '76.6000000000',
    #                 'S': 1},
    #                 {'A': '20.2258135650',
    #                 'D': '1647000592207',
    #                 'I': '110163781755762099',
    #                 'P': '76.6000000000',
    #                 'S': 0},
    #                 {'A': '15.6691864350',
    #                 'D': '1647000563732',
    #                 'I': '110163781755762098',
    #                 'P': '76.6000000000',
    #                 'S': 0},
    #                 {'A': '5.6740000000',
    #                 'D': '1647000563732',
    #                 'I': '110163781755762097',
    #                 'P': '76.6000000000',
    #                 'S': 0},
    #                 {'A': '36.3078135650',
    #                 'D': '1647000563732',
    #                 'I': '110163781755762096',
    #                 'P': '76.6000000000',
    #                 'S': 0},
    #                 {'A': '13.0430915049',
    #                 'D': '1647000530801',
    #                 'I': '110163781755762095',
    #                 'P': '76.6000000000',
    #                 'S': 0},
    #                 {'A': '1.3000000000',
    #                 'D': '1647000502380',
    #                 'I': '110163781755762094',
    #                 'P': '76.6000000000',
    #                 'S': 0},
    #                 {'A': '1.0427951658',
    #                 'D': '1647000488234',
    #                 'I': '110163781755762093',
    #                 'P': '76.6000000000',
    #                 'S': 0},
    #                 {'A': '0.6472628686',
    #                 'D': '1647000440347',
    #                 'I': '110163781755762092',
    #                 'P': '76.6000000000',
    #                 'S': 0},
    #                 {'A': '0.6860000000',
    #                 'D': '1647000440159',
    #                 'I': '110163781755762091',
    #                 'P': '76.4600000000',
    #                 'S': 1},
    #                 {'A': '5.7120000000',
    #                 'D': '1647000438093',
    #                 'I': '110163781755762090',
    #                 'P': '76.4000000000',
    #                 'S': 0},
    #                 {'A': '12.6370000000',
    #                 'D': '1647000437198',
    #                 'I': '110163781755762089',
    #                 'P': '76.3800000000',
    #                 'S': 0},
    #                 {'A': '0.5000000000',
    #                 'D': '1647000436516',
    #                 'I': '110163781755762088',
    #                 'P': '76.3700000000',
    #                 'S': 0},
    #                 {'A': '0.5000000000',
    #                 'D': '1647000428191',
    #                 'I': '110163781755762087',
    #                 'P': '76.2700000000',
    #                 'S': 1},
    #                 {'A': '2.0530000000',
    #                 'D': '1647000416314',
    #                 'I': '110163781755762086',
    #                 'P': '76.2600000000',
    #                 'S': 1},
    #                 {'A': '1.1900000000',
    #                 'D': '1647000415283',
    #                 'I': '110163781755762085',
    #                 'P': '76.3000000000',
    #                 'S': 0},
    #                 {'A': '39.2830000000',
    #                 'D': '1647000415283',
    #                 'I': '110163781755762084',
    #                 'P': '76.2900000000',
    #                 'S': 0},
    #                 {'A': '39.2830000000',
    #                 'D': '1647000405274',
    #                 'I': '110163781755762083',
    #                 'P': '76.2200000000',
    #                 'S': 0},
    #                 {'A': '0.8100000000',
    #                 'D': '1647000404137',
    #                 'I': '110163781755762082',
    #                 'P': '76.2100000000',
    #                 'S': 1},
    #                 {'A': '1.1900000000',
    #                 'D': '1647000404137',
    #                 'I': '110163781755762081',
    #                 'P': '76.2200000000',
    #                 'S': 1},
    #                 {'A': '1.0000000000',
    #                 'D': '1647000392549',
    #                 'I': '110163781755762080',
    #                 'P': '76.2000000000',
    #                 'S': 1},
    #                 {'A': '39.7500000000',
    #                 'D': '1647000319101',
    #                 'I': '110163781755762079',
    #                 'P': '76.2500000000',
    #                 'S': 1},
    #                 {'A': '0.7060000000',
    #                 'D': '1647000318677',
    #                 'I': '110163781755762078',
    #                 'P': '76.2500000000',
    #                 'S': 1},
    #                 {'A': '17.0980000000',
    #                 'D': '1647000311396',
    #                 'I': '110163781755762077',
    #                 'P': '76.2400000000',
    #                 'S': 1},
    #                 {'A': '0.6160000000',
    #                 'D': '1647000303913',
    #                 'I': '110163781755762076',
    #                 'P': '76.2500000000',
    #                 'S': 1},
    #                 {'A': '12.6370000000',
    #                 'D': '1647000303913',
    #                 'I': '110163781755762075',
    #                 'P': '76.2700000000',
    #                 'S': 1},
    #                 {'A': '0.6540000000',
    #                 'D': '1647000279134',
    #                 'I': '110163781755762074',
    #                 'P': '76.3500000000',
    #                 'S': 1},
    #                 {'A': '0.2096024805',
    #                 'D': '1647000258568',
    #                 'I': '110163781755762073',
    #                 'P': '76.6000000000',
    #                 'S': 0},
    #                 {'A': '0.2194344153',
    #                 'D': '1647000194305',
    #                 'I': '110163781755762072',
    #                 'P': '76.6000000000',
    #                 'S': 0}],
    #     'symbol': 'AVAXUSDT',
    #     'type': 421}]
    #     [421,
    #     {'channel': 'trade',
    #     'event': 'AVAXUSDT',
    #     'items': [{'A': '13.2630000000',
    #                 'D': '1647000805483',
    #                 'I': '110163781755762125',
    #                 'P': '76.5900000000',
    #                 'S': 0},
    #                 {'A': '3.7147661242',
    #                 'D': '1647000787783',
    #                 'I': '110163781755762124',
    #                 'P': '76.5900000000',
    #                 'S': 0},
    #                 {'A': '1.4220000000',
    #                 'D': '1647000779134',
    #                 'I': '110163781755762123',
    #                 'P': '76.5900000000',
    #                 'S': 0},
    #                 {'A': '0.3980000000',
    #                 'D': '1647000779134',
    #                 'I': '110163781755762122',
    #                 'P': '76.5800000000',
    #                 'S': 0},
    #                 {'A': '0.3980000000',
    #                 'D': '1647000752604',
    #                 'I': '110163781755762121',
    #                 'P': '76.5200000000',
    #                 'S': 1},
    #                 {'A': '4.3420000000',
    #                 'D': '1647000736635',
    #                 'I': '110163781755762120',
    #                 'P': '76.7000000000',
    #                 'S': 1},
    #                 {'A': '1.0230000000',
    #                 'D': '1647000722276',
    #                 'I': '110163781755762119',
    #                 'P': '76.7000000000',
    #                 'S': 1},
    #                 {'A': '29.2110000000',
    #                 'D': '1647000717267',
    #                 'I': '110163781755762118',
    #                 'P': '76.7800000000',
    #                 'S': 0},
    #                 {'A': '1.1120000000',
    #                 'D': '1647000717267',
    #                 'I': '110163781755762117',
    #                 'P': '76.7700000000',
    #                 'S': 0},
    #                 {'A': '0.6100000000',
    #                 'D': '1647000717267',
    #                 'I': '110163781755762116',
    #                 'P': '76.7700000000',
    #                 'S': 0},
    #                 {'A': '0.7900000000',
    #                 'D': '1647000698542',
    #                 'I': '110163781755762115',
    #                 'P': '76.7000000000',
    #                 'S': 0},
    #                 {'A': '1.1120000000',
    #                 'D': '1647000692670',
    #                 'I': '110163781755762114',
    #                 'P': '76.6900000000',
    #                 'S': 1},
    #                 {'A': '0.2880000000',
    #                 'D': '1647000692670',
    #                 'I': '110163781755762113',
    #                 'P': '76.6900000000',
    #                 'S': 1},
    #                 {'A': '1.4000000000',
    #                 'D': '1647000691575',
    #                 'I': '110163781755762112',
    #                 'P': '76.6900000000',
    #                 'S': 1},
    #                 {'A': '0.6100000000',
    #                 'D': '1647000687258',
    #                 'I': '110163781755762111',
    #                 'P': '76.7000000000',
    #                 'S': 1},
    #                 {'A': '1.5220000000',
    #                 'D': '1647000683927',
    #                 'I': '110163781755762110',
    #                 'P': '76.7900000000',
    #                 'S': 0},
    #                 {'A': '0.1479137526',
    #                 'D': '1647000676243',
    #                 'I': '110163781755762109',
    #                 'P': '76.8000000000',
    #                 'S': 0},
    #                 {'A': '6.8118144120',
    #                 'D': '1647000658838',
    #                 'I': '110163781755762108',
    #                 'P': '76.7900000000',
    #                 'S': 0},
    #                 {'A': '0.6758317902',
    #                 'D': '1647000652206',
    #                 'I': '110163781755762107',
    #                 'P': '76.8000000000',
    #                 'S': 0},
    #                 {'A': '1.9050000000',
    #                 'D': '1647000652206',
    #                 'I': '110163781755762106',
    #                 'P': '76.7600000000',
    #                 'S': 0},
    #                 {'A': '13.0294836890',
    #                 'D': '1647000635442',
    #                 'I': '110163781755762105',
    #                 'P': '76.6800000000',
    #                 'S': 0},
    #                 {'A': '4.0310000000',
    #                 'D': '1647000617276',
    #                 'I': '110163781755762104',
    #                 'P': '76.6900000000',
    #                 'S': 0},
    #                 {'A': '0.6490000000',
    #                 'D': '1647000617276',
    #                 'I': '110163781755762103',
    #                 'P': '76.6400000000',
    #                 'S': 0},
    #                 {'A': '0.2300000000',
    #                 'D': '1647000617276',
    #                 'I': '110163781755762102',
    #                 'P': '76.6100000000',
    #                 'S': 0},
    #                 {'A': '8.9211864350',
    #                 'D': '1647000607046',
    #                 'I': '110163781755762101',
    #                 'P': '76.6000000000',
    #                 'S': 1},
    #                 {'A': '4.7430000000',
    #                 'D': '1647000604304',
    #                 'I': '110163781755762100',
    #                 'P': '76.6000000000',
    #                 'S': 1},
    #                 {'A': '20.2258135650',
    #                 'D': '1647000592207',
    #                 'I': '110163781755762099',
    #                 'P': '76.6000000000',
    #                 'S': 0},
    #                 {'A': '15.6691864350',
    #                 'D': '1647000563732',
    #                 'I': '110163781755762098',
    #                 'P': '76.6000000000',
    #                 'S': 0},
    #                 {'A': '5.6740000000',
    #                 'D': '1647000563732',
    #                 'I': '110163781755762097',
    #                 'P': '76.6000000000',
    #                 'S': 0},
    #                 {'A': '36.3078135650',
    #                 'D': '1647000563732',
    #                 'I': '110163781755762096',
    #                 'P': '76.6000000000',
    #                 'S': 0},
    #                 {'A': '13.0430915049',
    #                 'D': '1647000530801',
    #                 'I': '110163781755762095',
    #                 'P': '76.6000000000',
    #                 'S': 0},
    #                 {'A': '1.3000000000',
    #                 'D': '1647000502380',
    #                 'I': '110163781755762094',
    #                 'P': '76.6000000000',
    #                 'S': 0},
    #                 {'A': '1.0427951658',
    #                 'D': '1647000488234',
    #                 'I': '110163781755762093',
    #                 'P': '76.6000000000',
    #                 'S': 0},
    #                 {'A': '0.6472628686',
    #                 'D': '1647000440347',
    #                 'I': '110163781755762092',
    #                 'P': '76.6000000000',
    #                 'S': 0},
    #                 {'A': '0.6860000000',
    #                 'D': '1647000440159',
    #                 'I': '110163781755762091',
    #                 'P': '76.4600000000',
    #                 'S': 1},
    #                 {'A': '5.7120000000',
    #                 'D': '1647000438093',
    #                 'I': '110163781755762090',
    #                 'P': '76.4000000000',
    #                 'S': 0},
    #                 {'A': '12.6370000000',
    #                 'D': '1647000437198',
    #                 'I': '110163781755762089',
    #                 'P': '76.3800000000',
    #                 'S': 0},
    #                 {'A': '0.5000000000',
    #                 'D': '1647000436516',
    #                 'I': '110163781755762088',
    #                 'P': '76.3700000000',
    #                 'S': 0},
    #                 {'A': '0.5000000000',
    #                 'D': '1647000428191',
    #                 'I': '110163781755762087',
    #                 'P': '76.2700000000',
    #                 'S': 1},
    #                 {'A': '2.0530000000',
    #                 'D': '1647000416314',
    #                 'I': '110163781755762086',
    #                 'P': '76.2600000000',
    #                 'S': 1},
    #                 {'A': '1.1900000000',
    #                 'D': '1647000415283',
    #                 'I': '110163781755762085',
    #                 'P': '76.3000000000',
    #                 'S': 0},
    #                 {'A': '39.2830000000',
    #                 'D': '1647000415283',
    #                 'I': '110163781755762084',
    #                 'P': '76.2900000000',
    #                 'S': 0},
    #                 {'A': '39.2830000000',
    #                 'D': '1647000405274',
    #                 'I': '110163781755762083',
    #                 'P': '76.2200000000',
    #                 'S': 0},
    #                 {'A': '0.8100000000',
    #                 'D': '1647000404137',
    #                 'I': '110163781755762082',
    #                 'P': '76.2100000000',
    #                 'S': 1},
    #                 {'A': '1.1900000000',
    #                 'D': '1647000404137',
    #                 'I': '110163781755762081',
    #                 'P': '76.2200000000',
    #                 'S': 1},
    #                 {'A': '1.0000000000',
    #                 'D': '1647000392549',
    #                 'I': '110163781755762080',
    #                 'P': '76.2000000000',
    #                 'S': 1},
    #                 {'A': '39.7500000000',
    #                 'D': '1647000319101',
    #                 'I': '110163781755762079',
    #                 'P': '76.2500000000',
    #                 'S': 1},
    #                 {'A': '0.7060000000',
    #                 'D': '1647000318677',
    #                 'I': '110163781755762078',
    #                 'P': '76.2500000000',
    #                 'S': 1},
    #                 {'A': '17.0980000000',
    #                 'D': '1647000311396',
    #                 'I': '110163781755762077',
    #                 'P': '76.2400000000',
    #                 'S': 1},
    #                 {'A': '0.6160000000',
    #                 'D': '1647000303913',
    #                 'I': '110163781755762076',
    #                 'P': '76.2500000000',
    #                 'S': 1},
    #                 {'A': '12.6370000000',
    #                 'D': '1647000303913',
    #                 'I': '110163781755762075',
    #                 'P': '76.2700000000',
    #                 'S': 1},
    #                 {'A': '0.6540000000',
    #                 'D': '1647000279134',
    #                 'I': '110163781755762074',
    #                 'P': '76.3500000000',
    #                 'S': 1},
    #                 {'A': '0.2096024805',
    #                 'D': '1647000258568',
    #                 'I': '110163781755762073',
    #                 'P': '76.6000000000',
    #                 'S': 0},
    #                 {'A': '0.2194344153',
    #                 'D': '1647000194305',
    #                 'I': '110163781755762072',
    #                 'P': '76.6000000000',
    #                 'S': 0}],
    #     'symbol': 'AVAXUSDT',
    #     'type': 421}]
    #     [422,
    #     {'A': '15.3700000000',
    #     'D': '1647000816026',
    #     'I': '110163781755762126',
    #     'P': '76.5900000000',
    #     'PS': 'AVAXUSDT',
    #     'S': 0,
    #     'channel': 'trade',
    #     'event': 'AVAXUSDT',
    #     'type': 422}]'''
    #
    #     trade_update = {
    #         "e": "trade",
    #         "E": 1234567890123,
    #         "s": "COINALPHAHBOT",
    #         "t": 12345,
    #         "p": "0.001",
    #         "q": "100",
    #         "b": 88,
    #         "a": 50,
    #         "T": 123456785,
    #         "m": True,
    #         "M": True
    #     }
    #
    #     trade_message = BtcturkOrderBook.trade_message_from_exchange(
    #         msg=trade_update,
    #         metadata={"trading_pair": "COINALPHA-HBOT"}
    #     )
    #
    #     self.assertEqual("COINALPHA-HBOT", trade_message.trading_pair)
    #     self.assertEqual(OrderBookMessageType.TRADE, trade_message.type)
    #     self.assertEqual(1234567890.123, trade_message.timestamp)
    #     self.assertEqual(-1, trade_message.update_id)
    #     self.assertEqual(-1, trade_message.first_update_id)
    #     self.assertEqual(12345, trade_message.trade_id)
